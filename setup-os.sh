#!/bin/bash

### validate running as root
if [[ $(id -u) -ne 0 ]]; then echo "Please run as root."; exit 1; fi

### grant default user sudo without password
sed -i '/ubuntu ALL=(ALL) NOPASSWD:ALL/d' /etc/sudoers
echo "ubuntu ALL=(ALL) NOPASSWD:ALL" | sudo tee -a /etc/sudoers

### install pachages
apt-get -y update
apt-get -y upgrade

apt-get -y install vim
apt-get -y install git
apt-get -y install pssh
apt-get -y install wget
apt-get -y install curl
apt-get -y install expect
apt-get -y install unzip

# remote access
apt-get -y install openssh-server
apt-get -y install xrdp

apt-get -y update
apt-get -y upgrade

### enable services
systemctl enable --now ssh
systemctl enable --now xrdp

### adjust system firewall
ufw allow from 192.168.1.3/32 to any port 22
ufw allow from 192.168.1.2/32 to any port 3389 proto tcp

